function getViewport(){return"BackCompat"==document.compatMode?{width:document.body.clientWidth,height:document.body.clientHeight}:{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}var $id=function(e){return document.getElementById(e)},$addEvent=function(){return document.addEventListener?function(e,n,t){if(e.length)for(var i=0;i<e.length;i++)$addEvent(e[i],n,t);else e.addEventListener(n,t,!1)}:function(e,n,t){if(e.length)for(var i=0;i<e.length;i++)$addEvent(e[i],n,t);else e.attachEvent("on"+n,function(){return t.call(e,window.event)})}}(),$addClass=function(e,n){if(!$hasClass(e,n))return e.className=""==e.className?n:e.className+" "+n},$removeClass=function(e,n){if($hasClass(e,n)){var t=new RegExp("(\\s|^)?"+n+"(\\s|$)","i");e.className=e.className.replace(t," ").replace(/^\s+|\s+$/,"")}},$hasClass=function(e,n){var t=new RegExp("(\\s|^)?"+n+"(\\s|$)","i");return t.test(e.className)},$siblings=function(e){for(var n=[],t=e.parentNode.children,i=0;i<t.length;i++)t[i]!==e&&n.push(t[i]);return n};window.isMobile=function(){return!!navigator.userAgent.match(/android|webos|ip(hone|ad|od)|opera (mini|mobi|tablet)|iemobile|windows.+(phone|touch)|mobile|fennec|kindle (Fire)|Silk|maemo|blackberry|playbook|bb10\; (touch|kbd)|Symbian(OS)|Ubuntu Touch/i)},window.requestFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),window.cancelFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){window.clearTimeout(e,1e3/60)}}();var init=function(){window.isMobile()?window.location.href="mobile.html":($id("container").style.display="block",setTimeout(function(){new BannerCanvas("banner-canvas")},2e3),bindEvent())},bindEvent=function(){var e=$id("side-heros"),n=450,t=$id("banner").clientHeight,i=$id("hero-1").clientHeight,a=($id("rule").offsetTop,getViewport(),document.body),o=(document.documentMode,!!window.ActiveXObject),r=o&&!window.XMLHttpRequest;$addEvent(window,"scroll",function(o){var s=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;document.documentElement.scrollHeight||document.body.scrollTop;r?s>n?e.style.top=s+100+"px":e.style.top="550px":(s>n?$addClass(e,"fixed"):$removeClass(e,"fixed"),s>t?$addClass(a,"fixed"):$removeClass(a,"fixed"));var d=s-2*t/3;currHero=d<0?1:Math.ceil(d/i),currHeroDom=$id("side-hero-"+currHero),currSiblings=$id("side-heros").getElementsByTagName("a");for(var c=0;c<currSiblings.length;c++)currSiblings[c]!==currHeroDom?$removeClass(currSiblings[c],"active"):$addClass(currSiblings[c],"active")}),$addEvent($id("to-top-btn"),"click",function(){backToTop()})},backToTop=function(){document.documentElement.scrollTop=document.body.scrollTop=0},getElementViewTop=function(e){var n=e.offsetTop,t=document.body.scrollTop;return n-t},BannerCanvas=function(e){if(this.canvas=$id(e),this.ctx=null,this.canvas.getContext){this.ctx=this.canvas.getContext("2d");var n=$id("container").clientWidth,t=$id("banner").clientHeight;this.canvas.width=n,this.canvas.height=t,this.lines=[],this.init()}};BannerCanvas.prototype={init:function(){this.initLines()},initLines:function(){for(var e=this,n=3,t=0;t<n;t++)e.lines.push({x:this.canvas.width+300*Math.random(),y:this.canvas.height*Math.random(),length:200*(Math.random()+1),lineW:2*(Math.random()+1),speed:5*(Math.random()+1)});e.startLineAnim()},startLineAnim:function(){function e(){n.clearCanvas();for(var i=0;i<t.length;i++)n.drawLines(t[i].x,t[i].y,t[i].length,t[i].lineW),t[i].speed+=.1,t[i].x-=t[i].speed,t[i].x<-t[i].length&&(n.lines.splice(i,1),n.lines.push({x:n.canvas.width+200*Math.random(),y:n.canvas.height*Math.random(),length:150*(Math.random()+1),lineW:2*(Math.random()+1),speed:15*(Math.random()+1)}));window.requestFrame(e)}var n=this,t=n.lines;e()},drawLines:function(e,n,t,i){var a=this,o=a.ctx,r=(-10*Math.PI/180,a.canvas.height);o.save(),o.rotate(-8*Math.PI/180),o.translate(e,n),o.beginPath(),o.moveTo(-t/2,0),o.lineTo(t/2,0),o.lineWidth=i;var s=o.createLinearGradient(0,0,t,0),d=n/r;if(s.addColorStop(0,"rgba(145, 83, 254, "+d.toFixed(2)+")"),s.addColorStop(1,"rgba(146, 83, 254, "+d.toFixed(2)+")"),o.strokeStyle=s,o.stroke(),o.closePath(),o.restore(),n>r/2){o.save(),o.rotate(-8*Math.PI/180),o.translate(e,n),o.scale(3,.2),o.beginPath();var c=o.createRadialGradient(0,0,0,0,0,20);c.addColorStop(0,"rgba(255, 255, 255, .5)"),c.addColorStop(1,"rgba(255, 255, 255, 0)"),o.arc(0,0,20,0,2*Math.PI),o.fillStyle=c,o.fill(),o.closePath(),o.restore()}},translateToCenter:function(){var e=this,n=e.canvas,t=e.ctx,i=n.width/2,a=n.height/2;t.translate(i,a)},clearCanvas:function(){var e=this;e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height)}},window.onload=init;